/*!
 * Dark Mode Switch v1.0.1 (https://github.com/coliff/dark-mode-switch)
 * Copyright 2021 C.Oliff
 * Licensed under MIT (https://github.com/coliff/dark-mode-switch/blob/main/LICENSE)
 */
var darkSwitch=document.getElementById("darkSwitch");window.addEventListener("load",(function(){if(darkSwitch){initTheme();darkSwitch.addEventListener("change",(function(){resetTheme()}))}}));function initTheme(){var darkThemeSelected=localStorage.getItem("darkSwitch")!==null&&localStorage.getItem("darkSwitch")==="dark";darkSwitch.checked=darkThemeSelected;darkThemeSelected?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme")}function resetTheme(){if(darkSwitch.checked){document.body.setAttribute("data-theme","dark");localStorage.setItem("darkSwitch","dark")}else{document.body.removeAttribute("data-theme");localStorage.removeItem("darkSwitch")}}

$(document).ready(function () {
  $('#darkSwitch').on('click', function () {
    if ($('body').hasClass('dark-theme')) {
      $(this).toggleClass('btn-light');
      $(this).addClass('btn-dark');
      $('h1').html("Light Mode");
      $('body').toggleClass('dark-theme');
      $('.card').toggleClass('dark-theme');
      localStorage.setItem("mode", "light-theme");
    } else {
      $(this).toggleClass('btn-light');
      $(this).removeClass('btn-dark');
      $('h1').html("Dark Mode");
      $('body').toggleClass('dark-theme');
      $('.card').toggleClass('dark-theme');
      localStorage.setItem("mode", "dark-theme");
    }
  })
  //check for localStorage, add as browser preference if missing
  if (!localStorage.getItem("mode")) {
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      localStorage.setItem("mode", "dark-theme");
    } else {
      localStorage.setItem("mode", "light-theme");
    }
  }
  //set interface to match localStorage
  if (localStorage.getItem("mode") == "dark-theme") {
    $('#darkSwitch').removeClass('btn-dark');
    $('#darkSwitch').addClass('btn-light');
    $('body').addClass('dark-theme');
    $('.card').addClass('dark-theme');
    $('h1').html("Dark Mode");
    document.getElementById("theme_toggle").checked = true;
  } else {
    $('#darkSwitch').addClass('btn-dark');
    $('#darkSwitch').removeClass('btn-light');
    $('body').removeClass('dark-theme');
    $('.card').removeClass('dark-theme');
    $('h1').html("Light Mode");
    document.getElementById("darkSwitch").checked = false;
  };
});
