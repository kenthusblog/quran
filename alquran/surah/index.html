<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   
   <!-- Primary Meta Tags -->
  <title></title>
  <meta name="title" content="Penuhi Kebutuhan Islamimu Disini">
  <meta name="description"
    content="Dengan App Moco Qur'an, kamu dapat membaca Al-Quran beserta artinya dan dengan audio secara online.
   Beberapa fitur menarik yang lain diantaranya, jadwal sholat seluruh daerah di Indonesia, membaca kisah Nabi dan Rasul, membaca Asmaul Husna, membaca Hadits-Hadits Rasulullah, membaca Doa-Doa Harian, membaca bacaan Sholat dan Tahlil, mendapatkan pencerahan dari ayat-ayat Al-Quran, serta mendapatkan quotes islami setiap saat. Islamic Bit dapat digunakan oleh seluruh orang, mulai dari masyarakat umum, guru dan siswa, traveler atau turis, serta para pengusaha dan pekerja.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://kenthus.netlify.app/">
  <meta property="og:title" content="Penuhi Kebutuhan Islamimu Disini">
  <meta property="og:description"
    content="Kamu dapat membaca Al-Quran beserta artinya dan dengan audio secara online. Beberapa fitur menarik yang lain diantaranya, jadwal sholat seluruh daerah di Indonesia, membaca kisah Nabi dan Rasul, membaca Asmaul Husna, membaca Hadits-Hadits Rasulullah, membaca Doa-Doa Harian, membaca bacaan Sholat dan Tahlil, mendapatkan pencerahan dari ayat-ayat Al-Quran, serta mendapatkan quotes islami setiap saat. 
   Moco Qur'an dapat digunakan oleh seluruh orang, mulai dari masyarakat umum, guru dan siswa, traveler atau turis,  serta para pengusaha dan pekerja.">
  <meta property="og:image" content="../../img/islamic-bit.jpg">
  <!-- Facebook and WhatsApp Meta Tag Open Graph by igniel.com -->
  <b:if cond='data:view.isHomepage'>
    <b:if cond='data:view.isPost'>
      <b:if cond='data:view.isPage'>
        <b:if cond='data:blog.url'>
          <meta expr:content='data:blog.url' property='og:url' />
        </b:if>
        <meta expr:content='data:blog.title' property='og:site_name' />
        <b:if cond='data:blog.pageName'>
          <meta expr:content='data:blog.pageName' property='og:title' />
        </b:if>
      </b:if>
    </b:if>
  </b:if>
  <meta content='blog' property='og:type' />
  <b:if cond='data:blog.postImageUrl'>
    <meta expr:content='data:blog.postImageUrl' property='og:image' />
    <b:else />
    <b:if cond='data:blog.postImageThumbnailUrl'>
      <meta expr:content='data:blog.postThumbnailUrl' property='og:image' />
      <b:else />
      <meta content='../../img/islamic-bit.jpg' property='og:image' />
    </b:if>
  </b:if>
  <b:if cond='data:blog.metaDescription'>
    <meta expr:content='data:blog.metaDescription' property='og:description' />
    <b:else />
    <meta expr:content='data:post.snippet' property='og:description' />
  </b:if>
  <meta expr:content='data:blog.title' property='og:site_name' />
  <meta content='https://www.facebook.com/agus.aka.gaara' property='article:author' />
  <meta content='https://www.facebook.com/agus.aka.gaara' property='article:publisher' />
  <meta content='agus.aka.gaara' property='fb:admins' />
  <meta content='en_US' property='og:locale' />
  <meta content='en_GB' property='og:locale:alternate' />
  <meta content='id_ID' property='og:locale:alternate' />
  <link itemprop="thumbnailUrl" href="../../img/islamic-bit.jpg">
  <span itemprop="thumbnail" itemscope itemtype="http://schema.org/ImageObject"></span>
  <link itemprop="url" href="../../img/islamic-bit.jpg">


  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://kenthus.netlify.app/">
  <meta property="twitter:title" content="Penuhi Kebutuhan Islamimu Disini">
  <meta property="twitter:description"
    content="Dengan App Moco Qur'an, kamu dapat membaca Al-Quran secara online. Beberapa fitur menarik yang lain diantaranya, jadwal sholat seluruh daerah di Indonesia, membaca kisah Nabi dan Rasul, membaca Asmaul Husna, membaca Hadits-Hadits Rasulullah, membaca Doa-Doa Harian, membaca bacaan Sholat dan Tahlil, mendapatkan pencerahan dari ayat-ayat Al-Quran, serta mendapatkan quotes islami setiap saat. Islamic Bit dapat digunakan oleh seluruh orang, mulai dari masyarakat umum, guru dan siswa, traveler atau turis,  serta para pengusaha dan pekerja.">
  <meta property="twitter:image" content="../../img/islamic-bit.jpg">
 
   
   <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
      integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
      crossorigin="anonymous" />
     <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

   
   <!-- Vendor CSS Files -->
    <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <link href="../../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="../../assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="../../assets/vendor/venobox/venobox.css" rel="stylesheet">
    <link href="../../assets/vendor/aos/aos.css" rel="stylesheet">

       
    <!-- Template Main CSS File -->
    <link href="../../assets/css/style.css" rel="stylesheet">
   
</head>

<body>

   
<header id="header" class="fixed-top ">
<div class="container-fluid">   
   <nav class="navbar navbar-dark fixed-top py-3 px-3 px-sm-0"
      style="color: var(--white); background-color: var(--blue1);">
              <div class="row justify-content-center">
                <div class="col-xl-9 d-flex align-items-center">
                    <h1 class="logo mr-auto">
                       <a href="/alquran" class="logo mr-auto"><img src="/img/muslim.webp" alt=""></a></h1>
                     <nav class="nav-menu d-none d-lg-block">
                        <ul>
                            <li class="active">
                            <a href="/alquran">Daftar Surat</a></li>
                            <li><a href="/#menu">Menu</a></li>
                           <li><a href="/about">Tentang</a></li>
                          <li><a href="/">Beranda</a></li>
                         </ul>
                    </nav>
                </div>
                       <div class="container aos-init aos-animate" data-aos="fade-up"><br>
                        <p><h3 class="nama-surat" style="font-weight: 100%;"></h3> 
                         <a type="button" data-toggle="modal" data-target="#myModal">Info Surat</a>
                          <tes></tes></p>
                                      
             </div>
      </div>
    </nav>
   </div>
       </header>   
  
   
   <!-- End Navbar Copy -->
   
    
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
   
<div class="container">
   <!-- Trigger the modal with a button -->
  <!--<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Info</button>-->

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          <section class="list-ayat">
          <div class="container mx-auto"></div></section>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  
</div>
   
   
  <!-- Ayat -->
    <main id="main"><br> 
       <section class="daftar-ayat">
         <div class="container mx-auto"><br>
         <h3 style="color: var(--blue2);">Loading...</h3>
         </div>
     </section>
    </main>
  <!-- End Ayat -->

   
   <!-- Autoplay Button -->
   <div class="autoplay fas fa-play" style="display: none;"></div>
   <!-- End Autoplay Button -->

   
   <div class="container mx-auto">
   <div class="col">
    <div class="p-4" style="border: 1px solid var(--blue1); border-radius: 6px;">
       <center><b><a href="/alquran/"><i class="material-icons">keyboard_arrow_left</i></a> - <a href="/"><i class="material-icons">home</i></a></b></center>
       </div></div>
      </div>
   
   
<!-- Share -->
 <p> <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5e77b55bb8637000145ecc3c&product=inline-share-buttons" async="async"></script>
<div class="sharethis-inline-share-buttons"></div></p>
  <!-- End Share -->

  <!-- Footer -->
  <footer class="py-4" style="background-color: var(--blue1); display: flex; flex-wrap: wrap; justify-content: center; align-items:
      center; color: var(--white);">
    <div>
      <h6 class="m-0 px-4 text-center">
         <a href="/" style="color: var(--yellow);">Kenthus</a><br>
        Made with &#10084; in JaTim, ID<br>
  <span class="text" style="font-size: 0.7em"><i>Â© 2021 Moco Qur'an.</i></span>
      </h6>
    </div>
  </footer>   
   


 <a href="# " class="back-to-atas "><i class="icofont-simple-up "></i></a>




<script src="https://code.jquery.com/jquery-3.5.1.min.js"
   integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
   integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>


   
    <!-- Vendor JS Files -->
    <script src="../../assets/vendor/jquery/jquery.min.js "></script>
    <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js "></script>
    <script src="../../assets/vendor/jquery.easing/jquery.easing.min.js "></script>
    <script src="../../assets/vendor/php-email-form/validate.js "></script>
    <script src="../../assets/vendor/waypoints/jquery.waypoints.min.js "></script>
    <script src="../../assets/vendor/counterup/counterup.min.js "></script>
    <script src="../../assets/vendor/owl.carousel/owl.carousel.min.js "></script>
    <script src="../../assets/vendor/isotope-layout/isotope.pkgd.min.js "></script>
    <script src="../../assets/vendor/venobox/venobox.min.js "></script>
    <script src="../../assets/vendor/aos/aos.js "></script>

    <!-- Template Main JS File -->
    <script src="../../assets/js/main.js "></script>


<script>
// Mengambil parameter nama dan nomer surat dari url
window.onload = function () {
   const parameter = document.location.href.split('?')[1].split('&');
   const nomerSurat = parameter[1].split('=')[1]

   // Request ke api dengan parameter yang sudah diambil
   $.ajax({
      url: `https://api.quran.sutanlab.id/surah/${nomerSurat}`,
      success: results => {
         // Mengecek apakah yang dihasilkan dari request API adalah JSON atau String
         results = typeof results == 'string' ? JSON.parse(results) : results

         const dataAyat = results.data.verses;
         const namaSurat = results.data.name.transliteration.id
         let fragmentDaftarAyat = '';

         $('.nama-surat').text(namaSurat);
         $('title').text(`Moco Quran - Surah ${namaSurat}`)
         $('.list-ayat').text(dataverses);
	      
         dataAyat.forEach(ayat => {
            const audio = ayat.audio.primary
            nomer = ayat.number.inSurah
            teksArab = ayat.text.arab
            teksLatin = ayat.text.transliteration.en
            arti = ayat.translation.id
            tafsir = ayat.tafsir.id.short
		 
            fragmentDaftarAyat += `
               <div class="ayat p-3 p-sm-4">
                  <div class="mb-0 py-2 me-3">
		     <h3 class="nomer-ayat text-center" style="font-style: italic;">${nomer}.</h3>
                     <span class="last-read far fa-bookmark" style="font-size: 1.8rem; cursor: pointer;"></span>
                  </div>
                  <div class="detail-ayat mb-2 w-100">
                     <div class="bacaan-ayat mb-3">
                        <audio controls>
                           <source src="${audio}">
                        </audio>
                        <h1 class="text-end m-0" style="font-weight: 600; line-height: 1.5;">${teksArab}</h1>
                     </div>
                     <div class="bacaan-latin" style="width: 100%; max-width: 700px;">
                        <h5 style="font-style: italic;">${teksLatin}</h5>
                     </div>
                     <div class="info-ayat mb-3 mb-sm-0" style="overflow: hidden;">
                        <div class="info mt-3" style="letter-spacing: 1px;">
                           <div class="arti mb-3">
                              <h6 class="m-0" style="font-weight: 600;">Arti:</h6>
                              <h6 class="m-0" style="font-weight: 400;">${arti}</h6>
                           </div>
                           <div class="tafsir">
                              <h6 class="m-0" style="font-weight: 600;">Tafsir:</h6>
                              <h6 class="m-0" style="font-weight: 400;">${tafsir}</h6>
                           </div>
                        </div>
                     </div>
                  </div>

                  <span class="expand-detail">
                     <img src="../../img/arrow-down.png">
                  </span>
               </div>
            `;
         })
	      
	  
         $('.daftar-ayat .container').html(fragmentDaftarAyat);
        $('.list-ayat .container').html(fragmentlistAyat);
	      
         document.querySelector('.autoplay').style.display = 'flex'

         // Lihat detail ayat saat tombol expand di click
         const expandDetail = document.querySelectorAll('.expand-detail');
         expandDetail.forEach(expand => {
            expand.addEventListener('click', function () {
               this.parentElement.querySelector('.info-ayat').classList.toggle('open');
               this.classList.toggle('open');

               if (this.parentElement.querySelector('.info-ayat').classList.contains('open')) {
                  const infoHeight = getComputedStyle(this.parentElement.querySelector('.info')).height;
                  this.parentElement.querySelector('.info-ayat').style.height = `calc(${infoHeight} + 2rem)`;
               } else {
                  this.parentElement.querySelector('.info-ayat').style.height = '0';
               }
            })
         });

         audioSetting();

         // Last-read labels
         const lastReadLabels = document.querySelectorAll('.ayat .last-read');
         if (JSON.parse(localStorage.getItem('Moco Quran')).bacaanTerakhir && JSON.parse(localStorage.getItem('Moco Quran')).bacaanTerakhir.nomerSurat == nomerSurat) {
            const bacaanAyatTerakhir = JSON.parse(localStorage.getItem('Moco Quran')).bacaanTerakhir.nomerAyat;
            lastReadLabels[bacaanAyatTerakhir].classList.add('fas')
            lastReadLabels[bacaanAyatTerakhir].classList.remove('far')

            // Loncat ke ayat yang terkahir dibaca
            let elementBacaanAyatTerakhir = $('.last-read.fas').parent().parent();
            $('html, body').animate({
               scrollTop: elementBacaanAyatTerakhir.offset().top - parseFloat(getComputedStyle(document.querySelector('nav')).height.replace('px', '')) - 20
            })
         }

         // Toggle label last-read saat di click
         for (let i = 0; i < lastReadLabels.length; i++) {
            lastReadLabels[i].addEventListener('click', function () {
               if (lastReadLabels[i].classList.contains('far')) {
                  this.classList.remove('far')
                  this.classList.add('fas')

                  for (let j = 0; j < lastReadLabels.length; j++) {
                     if (j != i) {
                        lastReadLabels[j].classList.remove('fas')
                        lastReadLabels[j].classList.add('far')
                     }
                  }

                  setBacaanTerakhir(parseInt(nomerSurat), i)
               } else {
                  this.classList.remove('fas')
                  this.classList.add('far')

                  const islamicBit = JSON.parse(localStorage.getItem('Moco Quran'))
                  delete islamicBit.bacaanTerakhir

                  setToLocalStorage(islamicBit)
               }
            })
         }
      }
   })
}

// Saat salah satu audio diputar, maka stop audio yang lain dipause
function audioSetting() {
   const audios = document.querySelectorAll('audio')
   for (let i = 0; i < audios.length; i++) {
      audios[i].addEventListener('play', function () {
         this.currentTime = 0;
         for (let j = 0; j < audios.length; j++) {
            if (j != i) {
               audios[j].pause();
            }
         }
      })
   }
}

// Membuat fitur autoplay
let indexAwal = 0;
let isPlayed = false;

document.querySelector('.autoplay').addEventListener('click', function () {
   if (this.classList.contains('fa-play')) {
      isPlayed = true;
      this.classList.remove('fa-play')
      this.classList.add('fa-pause')
      autoPlay(indexAwal)
   } else {
      isPlayed = false;
      this.classList.remove('fa-pause')
      this.classList.add('fa-play')
   }
})

function autoPlay(index) {
   const audios = document.querySelectorAll('audio');
   let indexPlayedAudio = index;
   if (indexPlayedAudio === document.querySelectorAll('.ayat').length) {
      document.querySelector('.autoplay').classList.remove('fa-pause')
      document.querySelector('.autoplay').classList.add('fa-play')
      return
   }

   // Auto scroll saat berganti audio bacaan ayat
   document.querySelectorAll('.ayat')[indexPlayedAudio].classList.add('current-play')
   const bacaanAyat = $('.current-play')
   $('html, body').animate({
      scrollTop: bacaanAyat.offset().top - parseFloat(getComputedStyle(document.querySelector('nav')).height.replace('px', '')) - 20
   })

   audios[indexPlayedAudio].play();
   const checkPlayedAudio = setInterval(() => {
      if (isPlayed) {
         if (audios[indexPlayedAudio].paused) {
            clearInterval(checkPlayedAudio)
            document.querySelectorAll('.ayat')[indexPlayedAudio].classList.remove('current-play')
            autoPlay(++indexPlayedAudio)
         }
      } else {
         indexAwal = indexPlayedAudio
         audios[indexPlayedAudio].pause()
      }
   }, 1);
}

// Mendapatakn surat dan ayat yang terkahir dibaca
if (!localStorage.getItem('Moco Quran')) {
   localStorage.setItem('Moco Quran', JSON.stringify({}))
}

function setBacaanTerakhir(nomerSurat, nomerAyat) {
   const islamicBit = JSON.parse(localStorage.getItem('Moco Quran'))
   islamicBit.bacaanTerakhir = {
      nomerSurat: nomerSurat,
      nomerAyat: nomerAyat
   }
   setToLocalStorage(islamicBit)
}

function setToLocalStorage(value) {
   localStorage.setItem('Moco Quran', JSON.stringify(value))
}


// Auto last-read
// const navbarHeight = parseFloat(getComputedStyle(document.querySelector('nav')).height.replace('px', ''));
// const daftarAyatPadTop = parseFloat(getComputedStyle(document.querySelector('.list-ayat')).paddingTop.replace('px', ''));

// window.onscroll = function () {
//    const daftarAyat = document.querySelectorAll('.ayat');
//    const ayatMarBottom = parseFloat(getComputedStyle(document.querySelector('.ayat')).marginBottom.replace('px', ''));

//    const minOffsetLastRead = navbarHeight * -1 - daftarAyatPadTop - (ayatMarBottom / 3)
//    const maxOffsetLastRead = navbarHeight + daftarAyatPadTop + (ayatMarBottom / 3)

//    console.log(`${minOffsetLastRead} - ${maxOffsetLastRead}`)

//    daftarAyat.forEach((ayat, nomer) => {
//       console.log(`${nomer} : ${ayat.getBoundingClientRect().y}`)
//       if (ayat.getBoundingClientRect().y > minOffsetLastRead && ayat.getBoundingClientRect().y <= maxOffsetLastRead) {
//          ayat.classList.add('last-read')
//       } else {
//          ayat.classList.remove('last-read')
//       }
//    })
// }
    </script>


   </body>  
</html>
